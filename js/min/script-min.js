function selectLetter(){"xxx"===user?(letter=x,letterMach=o):"ooo"===user&&(letter=o,letterMach=x),selector.classList.toggle("hidden"),boardGame.classList.toggle("hidden")}var cells=document.getElementsByClassName("cell"),x="x",o="oO",cellMachine,picked,options=[["c1","c2","c3","c4","c5","c6","c7","c8","c9"],["c1","c2","c3"],["c4","c5","c6"],["c7","c8","c9"],["c1","c4","c7"],["c2","c5","c8"],["c3","c6","c9"],["c1","c5","c9"],["c3","c5","c7"]],reset=document.getElementById("reset"),targetId,targetClass,winX=!1,user,letter,letterMach,selector=document.getElementById("selector"),boardGame=document.getElementById("boardGame");window.onload=function(){function e(e){for(var t=options.length,o=0;t>o;o++)for(var c=options[o].length,i=0;c>i;i++)targetId===options[o][i]&&options[o].splice(options[o].indexOf(options[o][i]),1,e);window.setTimeout(n,150)}function t(){options[0].includes("oO")?c():options[0].indexOf("c5")>=0?(picked="c5",i(letterMach)):options[0].indexOf("c3")>=0?(picked="c3",i(letterMach)):options[0].indexOf("c1")>=0?(picked="c1",i(letterMach)):options[0].indexOf("c7")>=0?(picked="c7",i(letterMach)):options[0].indexOf("c9")>=0&&(picked="c9",i(letterMach))}function c(){for(var e=options.length,t=1;e>t;t++){options[t].forEach(function(){options[t].sort()});for(var o=options[t].length,c=o;c>1;c--){if(options[t][c]===options[t][c-1])return picked=options[t][c-2],"x"===picked||"oO"===picked?(options[0].sort(),picked=options[0][0],"x"===picked||"oO"===picked?(alert("The game has finished, nobody win"),r()):picked):picked;"c"===options[t][c-1].charAt(0)&&"c"===options[t][c-2].charAt(0)&&(picked=options[t][c-2])}}}function n(){return s(),winX?void 0:(t(),cellMachine=document.getElementById(picked),cellMachine.classList.add(letterMach),i(letterMach),s())}function i(e){cellMachine=document.getElementById(picked),cellMachine.classList.add(letterMach);for(var t=0;t<options.length;t++)for(var o=0;o<options[t].length;o++)picked===options[t][o]&&options[t].splice(options[t].indexOf(options[t][o]),1,e)}function s(){for(var e=options.length,t=1;e>t;t++)if(options[t][2]===options[t][1]&&options[t][1]===options[t][0]){if(options[t][0]===x)return l(x);if(options[t][0]===o)return l(o)}}function l(e){return winX=!0,alert("The "+e+" have win"),r()}function r(){history.go(0)}selector.addEventListener("click",function(e){user=e.target.id,selectLetter()});for(var a=0,d=cells.length;d>a;a++)cells[a].addEventListener("click",function(t){targetId=t.target.id,targetClass=t.srcElement.className,targetClass.includes("x",-1)||targetClass.includes("oO",-1)?alert("Invalid move!"):(this.classList.add(letter),e(letter))});reset.addEventListener("click",r)};